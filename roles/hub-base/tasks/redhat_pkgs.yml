# os_family == 'redhat' SYSTEM SPECIFIC
# - name: Enable EPEL repo on AWS EC2 Amazon Linux 2 Instances
#   shell: |
#     amazon-linux-extras install epel -y
#   when: is_ec2
#   become: true

# - name: Enable EPEL repo on Centos 7 OSes
#   yum:
#     name: epel-release
#     # baseurl: https://download.fedoraproject.org/pub/epel/$releasever/$basearch/
#   when: not cloudstat.stat.isdir is defined and ansible_facts['os_family'] == "RedHat"
#   become: true

- name: install system pkgs
  yum:
    name: "{{ pkgs }}"
    state: latest
    update_cache: yes
  become: true
  vars:
    pkgs: 
      - chrony
      - cronie
      - openssh
      - make
      - zlib-devel
      - wget
      - ncurses-devel
      - libxml2-devel
      - gcc
      - tcsh
      - vim
  #    - ntp
      - git
      - golang
      - iftop
      - jq
      - lsof
      - man-pages
      - net-snmp
      # - https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
      - tree
      - unzip
      - xorriso
  tags:
    base
#    - epel-release
# xorriso really only for centos 7.7+, but need to get rid of ISOs all together.

- name: remove system pkgs
  yum:
    name: "{{ pkgs }}"
    state: absent
  become: true
  vars:
    pkgs: 
      - ntpd
